### 与 HTTP 协作的 Web 服务器
#### 用单台虚拟主机实现多个域名
HTTP/1.1 规范允许一台 HTTP 服务器搭建多个 Web 站点, 比如提供 Web 托管服务的供应商, 可以用一台服务器为多位客户服务, 这是因为利用了虚拟主机 (Vitual Host) 的功能

#### 通信数据转发程序: 代理, 网关, 隧道
HTTP 通信时, 除了客户端和服务端以外, 还有一些通信数据转发的应用程序, 例如代理, 网关, 隧道等; 它们可以配合服务器工作; 这些应用程序和服务器可以将请求转发给通信线路上的下一站服务器, 并且能接收从那台服务器发送的响应再转发给客户端
- 代理
代理是一种转发功能的应用程序, 它扮演了位于服务器和客户端 "中间人" 的角色, 接收由客户端发送的请求并转发给服务器, 同时也接受服务器返回的响应并转发给客户端
- 网关
网关是转发其他服务器通信数据的服务器, 接收从客户端发送来的请求时, 它就像自己拥有资源的服务器一样对请求进行处理
- 隧道
隧道是在相隔甚远的客户端和服务器两者之间进行中转, 并保持双发通信连接的应用程序

##### 代理
代理服务器的基本行为就是接收客户端发送的请求后转发给其他服务器, 代理不改变请求 URI, 会直接发送给前方持有资源的目标服务器; 持有资源实体的服务器被称为源服务器, 从源服务器返回的响应经过代理服务器后再传回客户端; 在 HTTP 通信过程中, 可级联多台代理服务器, 转发时需要附带 Via 首部字段以标记出经过的主机信息  
代理按两种基准分类: 一种是是否使用缓存, 另一种是是否会修改报文
- 缓存代理
代理转发响应时, 缓存代理 (Caching Proxy) 会预先将资源的副本保存在代理服务器上, 当代理再次接收到相同资源的请求时, 就可以不从源服务器那里获取资源, 而是将之前缓存的资源作为响应返回
- 透明代理
转发请求或响应时, 不对报文做任何加工的代理类型称为透明代理 (Transparent Proxy), 反之称为非透明代理
##### 网关
网关的工作机制和代理十分相似, 但网关能使通信线路上的服务器提供非 HTTP 协议服务; 利用网关能提高通信的安全性, 因为可以在客户端与网关之间的通信线路上加密以确保连接的安全
##### 隧道
隧道可按要求建立起一条与其他服务器的通信线路, 届时使用 SSL 等加密手段进行通信, 隧道的目的是确保客户端能与服务器进行安全的通信; 隧道本身不会解析 HTTP 请求, 也就是说请求保持原样中转给之后的服务器, 隧道会在通信双方断开连接时结束

#### 保存资源的缓存
缓存是指代理服务器或客户端本地磁盘保存了资源的副本, 利用缓存可减少对源服务器的访问, 因此也就节省了通信流量和通信时间
##### 缓存的有效期限
即使缓存服务器内有缓存, 也不能保证每次都会返回对同资源的请求, 因为当遇上源服务器上的资源更新时, 如果还是使用不变的缓存, 那就会演变成返回更新前的 "旧" 资源了; 所以当判定缓存过期, 缓存服务器会再次从源服务器上获取 "新" 资源
##### 客户端的缓存
缓存不仅可以存在缓存服务器内, 还可以存在客户端浏览器中, 与缓存服务器类似, 当判定缓存过期后, 会向源服务器获取新的资源
